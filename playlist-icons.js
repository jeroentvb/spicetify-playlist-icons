!async function(){for(;!Spicetify.React||!Spicetify.ReactDOM;)await new Promise(e=>setTimeout(e,10));var r,o,c,d,m,p,e,t,i,a,l,n,u,y,g,f,s;r=Object.create,o=Object.defineProperty,c=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,m=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,t=(e,t,i)=>{i=null!=e?r(m(e)):{};var a=!t&&e&&e.__esModule?i:o(i,"default",{value:e,enumerable:!0}),l=e,n=void 0,s=void 0;if(l&&"object"==typeof l||"function"==typeof l)for(let e of d(l))p.call(a,e)||e===n||o(a,e,{get:()=>l[e],enumerable:!(s=c(l,e))||s.enumerable});return a},i=(e=(e,t)=>function(){return t||(0,e[d(e)[0]])((t={exports:{}}).exports,t),t.exports})({"external-global-plugin:react"(e,t){t.exports=Spicetify.React}}),e=e({"external-global-plugin:react-dom"(e,t){t.exports=Spicetify.ReactDOM}}),a=t(i()),l=t(e()),n=t(i()),u=new Map,y="playlist-icons_big",g="plalist-icons_legacy",f=new Map,s=async function(){for(var e,a;null==Spicetify||!Spicetify.Platform||null==Spicetify||!Spicetify.CosmosAsync;)await new Promise(e=>setTimeout(e,100));const t=null!=(e=JSON.parse(localStorage.getItem(y)))&&e;let i=null!=(e=JSON.parse(localStorage.getItem(g)))&&e;const l=await async function e(t){t=await Spicetify.CosmosAsync.get(t);return[...t.items,...t.next?await e(t.next):[]]}("https://api.spotify.com/v1/me/playlists?limit=50"),n=(a="#spicetify-playlist-list",await new Promise(t=>{const i=setInterval(()=>{var e=document.querySelector(a);e&&(clearInterval(i),t(e))},100)}));let s;const r=()=>{w(l),s=_(()=>w(l))};i&&r(),t&&n.classList.add("big-icons");{var o=l;const c=e=>{Array.from(e).filter(e=>!e.classList.contains("add-to-playlist-item")&&!e.querySelector("input")).forEach(t=>{var e,i=!!t.querySelector("button span svg");const a=t.querySelector("button span");i?(h(t,"add-to-playlist-item__folder"),t.classList.add("add-to-playlist-item"),_(()=>{var e=t.querySelector('.main-contextMenu-menu[tabindex="-1"] > div');e&&c(e.children)},t)):(i=o.find(e=>e.name===(null==a?void 0:a.innerText)))&&(e=null!=(e=f.get(i.id))?e:v((null==(e=null==i?void 0:i.images[0])?void 0:e.url)||"","add-to-playlist-item__img"),t.prepend(e),t.classList.add("add-to-playlist-item"),f.has(i.id)||f.set(i.id,e))})};_(()=>{var e=document.querySelector('#context-menu .main-contextMenu-menu[tabindex="-1"] > div');e&&c(e.children)})}new Spicetify.Menu.SubMenu("Playlist Icons",[new Spicetify.Menu.Item("Legacy mode",i,e=>{e.setState(!e.isEnabled),localStorage.setItem(g,JSON.stringify(!i)),((i=!i)?r:(null!=s&&s.disconnect(),s=void 0,async function(){Array.from(document.getElementsByClassName("playlist-item__img")).forEach(e=>e.remove()),Array.from(document.getElementsByClassName("playlist-item")).forEach(e=>e.classList.remove("playlist-item"))}))()}),new Spicetify.Menu.Item("Big playlist icons",t,e=>{e.setState(!e.isEnabled),localStorage.setItem(y,JSON.stringify(!t)),n.classList.toggle("big-icons")})]).register()},(async()=>{await s()})();function v(e,t){var i=document.createElement(e?"img":"div");return i.classList.add(t),e?i.setAttribute("src",e):i.classList.add("no-icon"),i}function b(){return n.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#FFFFFF"},n.default.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),n.default.createElement("path",{d:"M9.17 6l2 2H20v10H4V6h5.17M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"}))}function h(e,...t){var i=document.createElement("div");return i.classList.add(...t),l.default.render(a.default.createElement(b,null),i),e.prepend(i),i}async function w(r){(await new Promise(t=>{const i=setInterval(()=>{var e=document.querySelectorAll("#spicetify-playlist-list li a");0<e.length&&(clearInterval(i),t(Array.from(e)))},100)})).forEach(e=>{var t;const i=e.href.split("/").at(-1);var a=e.href.split("/").at(-2),l=u.get(i);if(null!=(t=e.parentElement)&&t.classList.add("playlist-item"),l)null!=(t=e.parentElement)&&t.prepend(l);else switch(a){case"playlist":var n=r.find(e=>e.id===i),n=v((null==(n=null==n?void 0:n.images[0])?void 0:n.url)||"","playlist-item__img");null!=(s=e.parentElement)&&s.prepend(n),u.set(i,n);break;case"folder":if(!e.parentElement)return;var s=h(e.parentElement,"playlist-item__img","folder");u.set(i,s);break;default:console.warn("[playlist-icons] playlist list anchor type not recognized: "+a)}})}function _(e,t=document.body,i={childList:!0,subtree:!0}){const a=new MutationObserver(async()=>{a.disconnect(),await e(),a.observe(t,i)});return a.observe(t,i),a}(async()=>{var e;document.getElementById("playlistDicons")||((e=document.createElement("style")).id="playlistDicons",e.textContent=String.raw`
  :root{---playlist-img-spacing:6px}.playlist-item{padding-top:0;padding-bottom:0;align-items:center}.playlist-item__img{width:1.5em;height:1.5em;border-radius:2px;margin-right:12px;filter:brightness(85%)}.playlist-item__img.folder{background-color:var(--spice-tab-active);display:flex;align-items:center;justify-content:center}.playlist-item__img.folder svg{width:1.1em;height:1.1em}.playlist-item__img.no-icon{background-color:var(--spice-tab-active);height:1.5em}.playlist-item:hover .playlist-item__img{transition:.2s ease-out;filter:brightness(100%)}.add-to-playlist-item{display:flex;align-items:center}.add-to-playlist-item:hover{background-color:rgba(var(--spice-rgb-selected-row),.1)}.add-to-playlist-item__folder,.add-to-playlist-item__img{width:2.25rem;padding-left:12px}.add-to-playlist-item>button:hover{background-color:unset}.add-to-playlist-item>button[aria-expanded=true]{background-color:unset}.big-icons .playlist-item{padding-top:var(---playlist-img-spacing);padding-bottom:var(---playlist-img-spacing)}.big-icons .playlist-item__img{border-radius:4px;width:2em;height:2em}.big-icons .playlist-item__img.folder{padding:4px}.big-icons .playlist-item__img.folder svg{width:1.5em;height:1.5em}.big-icons>div{contain:unset}
      `.trim(),document.head.appendChild(e))})()}();